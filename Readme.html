<html>
<head><title>Xargon Mapper and Resource Extractor</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<style type="text/css">

body{
    font-family: sans-serif;
    margin: 3em;
    max-width: 100em;
}


a { text-decoration: none;}

a:visited{
    color: #1555AA;
}

a:link{
    color: #1555AA;
}

a:hover{
    color: #48F;
}

h1 {
    font-size: 3em;
    margin: 0;
    font-weight: normal;
}

h2 {
    font-size: 1.8em;
    color: #248;
    font-weight: normal;
    margin: 1em 0 0.5em;
}


h3, h4, h5, h6{
    color: #248;
    font-weight: bold;
}

h3 {
    font-size: 1.6em;
}

h4
{
    font-size: 1.4em;
}

h5 {
    font-size: 1.2em;
}

h6 {
    font-size: 1.0em;
}

dt { font-weight: bold }
</style>
</head>
<body>
<h1><a href="http://www.zerker.ca/zzone/2012/12/11/xargon-mapper-and-resource-extractor/">Xargon Mapper and Resource Extractor</a></h1>

<h2>About and Dependencies</h2>

<p>This is a series of Python scripts to generate maps of Xargon, as well as extract most of the Xargon image resources. These scripts require <a href="http://www.pythonware.com/products/pil/index.htm">the Python Imaging Library (PIL)</a> and <a href="http://python.org/">Python 2.x</a> (tested with Python 2.7.3). PIL unfortunately does not yet support Python 3, which prevents these scripts from being forward-compatible at this time.

<p>Windows users should be able to download Python and PIL from the above links. Most Linux/Unix varients should be able to install Python and PIL via your package manager of choice; Ubuntu users can install the <strong>python</strong> and <strong>python-imaging</strong> libraries. OSX users should already have Python, but you may need to compile PIL yourself via the source download at the PIL website.

<p>The scripts also obviously require <strong>Xargon</strong>, either the shareware or full versions. The full version <a href="http://www.classicdosgames.com/game/Xargon.html">has been released as Freeware</a>, so it should be easy for you to get what you need.

<p>A full development log for this tool is available on the <a href="http://www.vgmaps.com/forums/index.php?topic=1867.0">VGMaps Forums</a>.
This tool was developed without the use of the Xargon source code by manually
decoding the game resources, so some of the techniques may be useful for decoding other games.</p>

<p>Please note the <strong>palimage#.png</strong> image files are used to obtain
the assorted Xargon colour paletted variations, and are required for
this tool to work.</p>

<h2>Usage</h2>

<p>There are two scripts included in the package that are intended to be executed directly.
<strong>xargonmapper.py</strong> is the main map generation script,
<strong>xargongraphics.py</strong> is a script to extract the contents of a Xargon GRAPHICS resource file. In addition to the three scripts above, several supplimentary scripts can be run to gather debug outputs of one form or another, and are listed under the <strong>Other Scripts</strong> heading.

<p>The <strong>genep1.sh, genep2.sh and genep3.sh</strong> are pre-made shell scripts to generate map images for each episode of the game. You can edit these files to change the path to Xargon for alternate configurations. Sorry, no .BAT files are provided for Windows users, but the .sh files and the below instructions should get you going.</p>

<h3>xargonmapper.py</h3>
<strong>Usage: python xargonmapper.py [Graphics File] [Tiles File] [Map File(s)...]</strong>

<p>Generates map images for every Xargon map file indicated. Requires the
corresponding GRAPHICS file for the images to use, and the TILES file
for the map tile to graphics resource mapping. All files should be from
the same Episode of Xargon.

<h3>xargongraphics.py</h3>
<strong>Usage: python xargongraphics.py [Graphics File]</strong>

<p>Extracts all graphics resources from the specified GRAPHICS file from
Xargon. Output is stored in the Episode#Images and
Episode#OriginalImages folders, where # is the episode number of the
input file. The OriginalImages folder contains the original 256-colour
images without any additional processing, while the Images folder
contains 32-bit RGBA images after colour index 0 has been set
transparent.

<h3>Other Scripts</h3>
<h4>xargonmap.py</h4>
<strong>Usage: python xargonmap.py [Map File(s)]</strong>

Generates the following debug information for each specified Xargon map
file:
<dl>
<dt>[mapname]_flat.png</dt><dd>A false-colour image of the map, where each tile
                     value is represented as a different colour.</dd>
<dt>[mapname].csv</dt><dd>A simple CSV containing each tile value</dd>
<dt>[mapname]_info.csv</dt><dd>Auxiliary information about a map from the footer.
                     Contains all the unknown header-type information,
                     as well as the strings.</dd>
<dt>[mapname]_objs.csv</dt><dd>A full listing of all objects in the specified map,
                     and all their associated fields.</dd>
<dt>[mapname]_strings.csv</dt><dd>A listing of all the strings in the map, as well
                        as the guessed mapping to object reference
                        values.</dd>
</dl>
<h4>xargontiles.py</h4>

<strong>Usage: python xargontiles.py [Tiles File]</strong>

<p>Generates a debug CSV file for the mapping specified in the given
TILES file from Xargon. Output is written to tiles.csv.

<h4>xargonfontgen.py</h4>

<strong>Usage: python xargongraphics.py [Graphics File]</strong>

<p>Generates BDF fotn files for the two identified fonts stored in the
Xargon GRAPHICS file. The BDF files can then be converted to .pil files
for use in the main mapper via the pilfont.py script. The BDF files can
also be used in any software that supports BDF.

</body></html>
